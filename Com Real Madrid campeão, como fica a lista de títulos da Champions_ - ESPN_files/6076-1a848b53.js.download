(self.webpackChunkfitt=self.webpackChunkfitt||[]).push([[6076],{36076:(e,t,n)=>{var a,s,o,i,r,c,u,p,h,m,d,l,g,w,P,f,E,v,y,C=n(50239),T=n(41541),S=n(45697),_=n(40924),b=n(60210),k=n(11227)("watch:page"),A=n(22154),L=n(38169),N=n(13311),R=n(27361),D=n(98611),I=n(35161),W=n(82729),O=n(23992).getTimeZoneOffset,F=n(84967),V=n(19495),z=n(39233),U=n(56830),x=U.cleanEntitlements,H=U.getWatchEditionCountry,B=U.getWatchPlayerURL,G=U.getWatchURL,Y=U.mixWatchHashParams,$=U.parseWebLink,Z=n(20263),j=n(34248),M=j.toJS,q=j.reaction,J=j.observe,K=n(53781),Q=K.Condition,X=K.Rule,ee=K.Ruleset,te=K.constants,ne=te.COND_TYPE_CHANGE,ae=te.COND_TYPE_CHANGE_TO,se=te.COND_TYPE_CHANGE_FROM,oe=C.emptyObj,ie=C.FALSE,re=C.TRUE,ce=C.UNDEF,ue=C.empty,pe=C.forEach,he=C.last,me=C.mix,de=C.isAry,le=C.passThru,ge=C.struc,we=C.isFunc,Pe=C.ues,fe=F.loc,Ee="state.routing.params",ve=`${Ee}.bucketId`,ye="page.content",Ce=`${ye}.watch`,Te=`${Ce}.bkts`,Se=`${Ce}.p13n`,_e=Z.PROP_NAMES,be=_e.VIDEO,ke=A.WATCH_SUBPAGE_TYPES,Ae=ke.SCHEDULE,Le="rawPageType",Ne="isEspnPlus",Re=Z.RAW_PAGE_TYPES.PLAYER,De={noRecurse:re,owned:re},Ie=Z.WATCH_LAST_VISITED_KEY,We=",",Oe="/watch/",Fe="context.emit",Ve="stateChange";function ze(e,t){var n=t||oe,a=(e||oe).country,s=(R(n,"request.vary")||oe).country,o=a||s;return H(o)||o}function Ue(){var e=V.loc();return e&&e.hash||""}function xe(e){var t,n=e||oe,a=n.pathname,s=n.search,o=n.hash;a&&(t=a),s&&(t=D([t,s],"")),o&&(t=D([t,o],"")),t&&this.setLastVisited(t)}a={componentName:"WatchDescriptor",metaData:_,updateState:b,getPersonalizedAPIParams:function(e,t,n,a){var s,o,i=e||oe,r=R(t,"isEspnPlus"),c=r?"ESPN_PLUS":ce,u="home"===R(t,"rawPageType"),p=R(a,"fan.data",oe),h=p.teamsPreferences,m=p.sportsPreferences,d=R(n,"page.content.watch.p13n",oe),l=d.authNetworks,g=d.authStates,w=i.dtcPackages,P=i.edition||oe,f=P.config,E=P.language,v=R(f,"dateTime.timeZoneBucket",null),y=R(f,"watch.apiParams",{}),C=d.zipcode,T=d.countryCode||ze(t,n),S=x(d.entitlements||Pe(R(n,"request.vary.dtcAuth")),w),_=d.lang||E,b=d.tz||O(v),k=me({},y,De);return h&&u&&(s=I(h,(function(e){return R(e,"metaData.team.uid")})),k.favoriteTeam=D(s,We)),m&&u&&(o=I(m,(function(e){return R(e,"metaData.sport.uid")})),k.favoriteSport=D(o,We)),l&&(k.authNetworks=l),g&&(k.authStates=g),T&&(k.countryCode=ge(T)),S&&(k.entitlements=S),_&&(k.lang=_),b&&(k.tz=b),C&&(k.zipcode=C),r&&(k.sourcePageType=c),k},render:function(){return null},transition:{reload:(s=[new Q(ne,"subPageType",re)],o=new X(s,ie,14),i=[new Q(ae,Le,"news")],r=new X(i,re,4),c=[new Q(ae,Le,"tools")],u=new X(c,re,4),p=[new Q(se,Le,Re)],h=new X(p,re,4),m=[new Q(ae,Ne,re)],d=new X(m,re,4),l=[new Q(se,Ne,re)],g=new X(l,re,4),w=[new Q(ae,Le,Re)],P=new X(w,ie,3),f=[new Q(se,Le,Ae)],E=new X(f,re,2),v=[new Q(ae,Le,Ae)],y=new X(v,re,2),new ee([o,E,y,h,d,g,P,r,u]))},instanceAug:{componentDidMount:function(){var e,t,n=this,a=n&&n.props||oe,s=(a.history||oe).listen,o=a.state||oe,i=R(n,Fe,le),r=o.routing||oe,c=r.params||oe,u=r.location||oe,p=a.subscriber||oe,h=R(p,"data.dss.entitlementsReady")===re,m=R(o,"app.edition"),d=R(m,"config.dateTime.timeZoneBucket"),l=L(xe,n),g=ze(c,o),w=c.rawPageType===Re,P=u.hash||Ue(),f=c._watchP13n===ie,E=O(d),v=R(p,"options.language");n._disposers=[],n.setLastVisited(),s&&(n.historyListen=s(l)),f?(e=R(o,ye),t=me({},[e,{personalized:re}],De),i({type:Ve,ns:ye,value:t})):(n.emitP13nStateChange({countryCode:g,lang:v,tz:E}),(!h&&p.get?p.get("dss"):Promise.resolve()).then((function(){n._disposers.push(q((()=>R(o,Se)),n.personalizePage,{delay:50})),n._disposers.push(J(p.data,n.updateWatchP13nFromSubscriber)),n.updateWatchP13nFromSubscriber()}))),w&&!P&&(R(o,`${Ce}.${be}`)||fe(G(Oe,{edition:m,params:c,isEspnPlus:c.isEspnPlus}),re))},componentWillUnmount:function(){var e=this,t=e.historyListen,n=e._disposers;t&&(t(),e.historyListen=ce),n&&(pe(n,(e=>e())),e._disposers=ce)},emitP13nStateChange:function(e){var t,n=this,a=(n&&n.props||oe).state,s=R(n,Fe,le),o=R(a,Ce,oe),i=o.p13n||{},r=me(i,e,De);e&&(t=me({},[o,{p13n:M(r,ie)}],De),s({type:Ve,ns:Ce,value:t}))},personalizePage:function(e){var t=this,n=R(t,"props.state",oe),a=R(t,"props.fan"),s=R(t,Fe,le),o=n.app||oe,i=n.routing||oe,r=R(o,"featureGating.continueWatching"),c=i.params||oe,u=t&&t.constructor,p=i.location||oe,h=p.hash||Ue();return k("p13n fetch",e),h&&Y(c,h),t&&e&&"mock"!==c._dataType?T({components:[u]},n,o,{fan:a,withCredentials:r}).then((e=>(k("p13n parse"),u.parser(e,p,n)))).then((e=>me({},[e,{personalized:re}],De))).then((e=>b.call(null,e,n))).then((e=>{var t=R(n,ye),a=me({},[t,e],De);k("emit updates"),s({type:Ve,ns:ye,value:a})})).catch((function(e){var t=(e||oe).type,a=R(n,"app.edition");"INVALID_VIDEO"===t&&fe(G(Oe,{edition:a,params:c,isEspnPlus:c.isEspnPlus}),re)})):Promise.resolve()},setLastVisited:function(e){var t,n=(this&&this.props||oe).state,a=z.sessionStorage||oe,s=R(n,"page.subType"),o=e||R(n,"routing.location.originalPathName");s!==ke.LISTING&&s!==ke.SCHEDULE||we(a.getItem)&&we(a.setItem)&&(t=a.getItem(Ie),de(t)?he(t)!==o&&(t.push(o),t.length>=10&&(t=t.slice(1,10)),a.setItem(Ie,t)):a.setItem(Ie,[o]))},onVideoChange:function(e,t){var n=this||oe,a=n.props||oe,s=R(n,"props.history.push"),o=(t||oe)[_e.HREF],i=t?ce:R(a,ve),r=R(a,"state.app.edition"),c=R(a,Ee);o||(o=B({id:e}),o=$(o,i,{edition:r,params:c})),we(s)?s(o,{anConfig:{autoTrackPageView:ie}}):fe(o,re)},removeFromBucket:function(e,t){var n=this,a=(n&&n.props||oe).state,s=R(n,Fe,le),o=R(a,Te,oe),i=N(o,{id:e})||oe,r=i.itms;i&&t&&(W(r,{id:t}),r&&0===r.length&&W(o,{id:e}),s({type:Ve,ns:Te,value:M(o,ie)}))},updateWatchP13nFromSubscriber:function(){var e=this.props||oe,t=e.subscriber||oe,n=e.state||oe,a=t.data||oe,s=a.dss||oe,o=(a.mvpd||oe).authNetworks,i=a.authStates,r=s.sessionToken,c=s.entitlements,u=a.userZip||R(e,"guest.profile.userZip"),p=R(n,Se,oe),h={};pe({authNetworks:o&&D(o,We),authStates:i&&D(i,We),dssSessionToken:r,entitlements:c&&D(c,We),zipcode:u},(function(e,t){e&&t&&p[t]!==e&&(h[t]=e)})),ue(h)||this.emitP13nStateChange(h)},contextTypes:{emit:S.func,translate:S.func,watchSession:S.object},childContextTypes:{watchOnVideoChange:S.func,watchP13n:S.object,watchRemoveFromBucket:S.func},getChildContext:function(){var e=this,t=(e&&e.props||oe).state;return{watchOnVideoChange:e.onVideoChange,watchP13n:R(t,Se),watchRemoveFromBucket:e.removeFromBucket}}}},e.exports=a},60210:(e,t,n)=>{var a=n(50239),s=a.emptyObj,o=a.mix,i=a.TRUE,r=n(27361),c={noRecurse:i,owned:i};e.exports=function(e,t){var n=r(t,"page.content.watch",{});return{watch:o({},[n,e||s],c)}}}}]);